<?xml version="1.0" encoding="UTF-8"?><biztoolcfg qryfmtOpCreate="INSERT ignore INTO tms.xtmst_vehiclesituation (vehicleid,vehiclerealtimeid,operatetype,freightid,xsiteid,cityid,address,createby,createdate,vehiclesituationid)  SELECT vehicleid,vehiclerealtimeid,%{OperateType[TypeCode]},freightid,'%{XSiteID[XSiteID]}','%{CityID[CityID]}','%{Address}','10438',NOW(),UUID() FROM xtmst_dispatchplan WHERE VehicleRealTimeID='%{VehicleRealTimeID[VehicleRealTimeID]}' and IF(%{OperateType[TypeCode]}=1301,FromCityID,ToCityID)='%{CityID[CityID]}' AND IF(%{OperateType[TypeCode]}=1301,FromAddress,ToAddress)='%{Address}';" qryfmtOpUpdate="" loadedClick="0" tableNm="xtmst_vehiclesituation" referLst="0" onLoadInit="0" tableTxt="xtmst_vehiclesituation" LstTP="Lst" lines2Link="" jointbls="1" header2Link="" exdata4select=""><DataLstExtElmt><![CDATA[<DbDetails><queryFormat>select %{data} from %{dbtable} where x1.carrierid='%{orgguid}' %{WHERE} limit %{StartRow},%{PgSize}</queryFormat></DbDetails>]]></DataLstExtElmt><Ctrls><Ctrl nomodify="1" ctrldbname="tms." name="vehicleid" ctrldbwhere="VehicleID='%{VehicleRealTimeID[VehicleID]}'" ctrldbtable="xtmsm_vehicle" noUpdate="1" ctrldbdata="Platenumber,VehicleID" ctrldbdatarel="vehicleid"/><Ctrl nomodify="1" ctrldbname="tms." name="vehiclerealtimeid" ctrldbtable="xtmst_vehiclerealtime" ctrldbdata="VehicleRealTimeCode,VehicleID,FromCityID,ToCityID,FromAddress,ToAddress,VehicleRealTimeID" ctrldbdatarel="vehiclerealtimeid"><extelmt><![CDATA[<OnEnChange><submit next="VehicleID"/></OnEnChange>]]></extelmt></Ctrl><Ctrl nomodify="1" ctrldbname="tms." name="operatetype" ctrldbwhere="TypeClass=130" ctrldbtable="xtmsc_type_option" ctrldbdata="TypeName,TypeCode" ctrldbdatarel="typecode"><extelmt><![CDATA[<OnSelEndOk><if cond="%{FreightID[FreightID]}"><submit next="XSiteID"/><submit next="CityID"/><if cond="%{OperateType[TypeCode]}==1301"><assign name="Address" expr="%{FreightID[FromAddress]}"/><else/><assign name="Address" expr="%{FreightID[ToAddress]}"/></if></if></OnSelEndOk>]]></extelmt></Ctrl><Ctrl ctrldbname="tms." name="freightid" ctrldbwhere="f.VehicleRealTimeID='%{VehicleRealTimeID[VehicleRealTimeID]}'" queryformat="SELECT FreightCode,dp.FromCityID,dp.ToCityID,FromAddress,ToAddress,dp.FromXSiteID,dp.ToXSiteID,f.FreightID    FROM tms.xtmst_dispatchplan dp JOIN tms.xtmst_freight f ON dp.FreightID=f.FreightID WHERE %{where}" ctrldbtable="xtmst_freight" noUpdate="1" xTp="ComboBox" ctrldbdata="FreightCode,FreightID" ctrldbdatarel="freightid" ctrltype="ComboBox"><extelmt><![CDATA[<OnSelEndOk><submit next="XSiteID"/><submit next="CityID"/><if cond="%{OperateType[TypeCode]}==1301"><assign name="Address" expr="%{FreightID[FromAddress]}"/><else/><assign name="Address" expr="%{FreightID[ToAddress]}"/></if></OnSelEndOk>]]></extelmt></Ctrl><Ctrl nomodify="1" ctrldbname="tms." name="xsiteid" ctrldbwhere="XSiteID=if('%{OperateType[TypeCode]}'=1301,'%{FreightID[FromXSiteID]}','%{FreightID[ToXSiteID]}')" ctrldbtable="xtmsm_xsite" ctrldbdata="XSiteName,Address,XSiteID" ctrldbdatarel="xsiteid"/><Ctrl nomodify="1" ctrldbname="tms." name="cityid" ctrldbwhere="CityID=if('%{OperateType[TypeCode]}'=1301,'%{FreightID[FromCityID]}','%{FreightID[ToCityID]}')" ctrldbtable="xtmsm_master_city" ctrldbdata="CityAllName,CityID" ctrldbdatarel="cityid"/><Ctrl nomodify="1" name="address"/><Ctrl noquery="1" nomodify="1" ctrlhide="1" name="createby" insertparam="'%{user_id}'" updateparam="'%{user_id}'" noUpdate="1"/><Ctrl noquery="1" nomodify="1" ctrlhide="1" name="createdate" insertparam="now()" noUpdate="1"/><Ctrl noquery="1" nomodify="1" ctrlhide="1" name="vehiclesituationid" insertparam="uuid()" noUpdate="1"/><Ctrl noquery="1" nomodify="1" ctrlhide="1" name="xtmst_vehiclesituation_id" noInsert="1" noInAndUp="1" noUpdate="1"/></Ctrls></biztoolcfg>