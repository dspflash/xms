<?xml version="1.0" encoding="UTF-8"?><biztoolcfg qryfmtOpCreate="SET @seq=0;SELECT SUBSTR(LoadCode,-5)+0 INTO @seq FROM tms.xtmst_loadorder WHERE DATE(CreateDate)=CURDATE() ORDER BY LoadCode DESC LIMIT 0,1;SELECT generate_orderNo(Code_Prefix, DT_MODE, @seq,'','') INTO @odn FROM tms.xms_doc_code WHERE docType='loadorder';insert into %{table} %{data};" qryfmtOpUpdate="" loadedClick="0" tableNm="xtmst_loadorder" referLst="0" onLoadInit="0" tableTxt="xtmst_loadorder" LstTP="Lst" lines2Link="xtmst_loadorderdetail" jointbls="1" header2Link="" exdata4select=""><DataLstExtElmt><![CDATA[<DbDetails><queryFormat>select %{data} from %{dbtable} where x.carrierid='%{orgguid}' %{WHERE} limit %{StartRow},%{PgSize}</queryFormat></DbDetails>]]></DataLstExtElmt><operators4v><![CDATA[<xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="xtmst_loadorder_ops.xml"/>]]></operators4v><Ctrls><Ctrl nomodify="1" name="loadcode" insertparam="@odn" noUpdate="1"/><Ctrl Required="1" nomodify="1" ctrldbname="tms." name="vehiclerealtimeid" queryformat="SELECT Platenumber,dp.FromCityID,dp.FromAddress,dp.FromXSiteID,VehicleRealTimeCode,v.CarrierID,dp.VehicleRealTimeID  FROM tms.xtmst_dispatchplan dp  JOIN  tms.xtmst_vehiclerealtime vrt ON dp.VehicleRealTimeID=vrt.VehicleRealTimeID JOIN tms.xtmsm_vehicle v ON v.VehicleID=vrt.VehicleID WHERE %{where}" ctrldbtable="xtmst_vehiclerealtime" ctrldbdata="VehicleRealTimeCode,v.CarrierID,FromCityID,FromAddress,VehicleRealTimeID" ctrldbdatarel="vehiclerealtimeid"><extelmt><![CDATA[<OnEnChange><submit next="CarrierID"/><submit next="XSiteID"/><submit next="LoadCityID"/><assign name="LoadAddress" expr="%{VehicleRealTimeID[FromAddress]}"/></OnEnChange>]]></extelmt></Ctrl><Ctrl noquery="1" nomodify="1" ctrldbname="tms." ctrlhide="1" name="status" ctrldbwhere="StatusType=60" insertparam="601" ctrldbtable="xtmsc_status_option" noUpdate="1" ctrldbdata="StatusName,StatusCode" ctrldbdatarel="statuscode"/><Ctrl nomodify="1" ctrldbname="tms." name="xsiteid" ctrldbwhere="XSiteID='%{VehicleRealTimeID[FromXSiteID]}'" ctrldbtable="xtmsm_xsite" ctrldbdata="XSiteName,XSiteID" ctrldbdatarel="xsiteid"><extelmt><![CDATA[<OnSelEndOk><submit next="UnLoadCityID"/></OnSelEndOk>]]></extelmt></Ctrl><Ctrl Required="1" nomodify="1" ctrldbname="tms." name="loadcityid" ctrldbwhere="CityID='%{VehicleRealTimeID[FromCityID]}'" ctrldbtable="xtmsm_master_city" ctrldbdata="CityAllName,CityID" ctrldbdatarel="cityid"/><Ctrl nomodify="1" name="loadaddress"/><Ctrl name="memo"/><Ctrl noquery="1" nomodify="1" ctrlhide="1" name="checkby" noInsert="1" noUpdate="1"/><Ctrl noquery="1" nomodify="1" ctrlhide="1" name="checkdate" noInsert="1" noUpdate="1"/><Ctrl noquery="1" nomodify="1" ctrlhide="1" name="createby" insertparam="'%{user_id}'" updateparam="'%{user_id}'" noUpdate="1"/><Ctrl noquery="1" nomodify="1" ctrlhide="1" name="createdate" insertparam="now()" noUpdate="1"/><Ctrl noquery="1" nomodify="1" ctrlhide="1" name="updateby" insertparam="'%{user_id}'" updateparam="'%{user_id}'"/><Ctrl noquery="1" nomodify="1" ctrlhide="1" name="updatedate" insertparam="now()" updateparam="now()"/><Ctrl noquery="1" nomodify="1" ctrlhide="1" name="loadorderid" insertparam="uuid()" noUpdate="1"/><Ctrl noquery="1" nomodify="1" ctrlhide="1" name="xtmst_loadorder_id" noInsert="1" noInAndUp="1" noUpdate="1"><extelmt><![CDATA[<OnEnChange><if cond="'%{xtmst_loadorder_id}'"><SetVisible name="insertxtmst_loadorder" Visible="0"/><SetVisible name="modifyxtmst_loadorder" Visible="1"/><else/><SetVisible name="insertxtmst_loadorder" Visible="1"/><SetVisible name="modifyxtmst_loadorder" Visible="0"/></if><DbDetails><Where>LoadOrderID=(select LoadOrderID from xtmst_loadorder where  xtmst_loadorder_id='%{xtmst_loadorder_id}')</Where></DbDetails><submit next="xtmst_loadorderdetail_vLst" namelist="DbDetails"/></OnEnChange>]]></extelmt></Ctrl><Ctrl Required="1" noquery="1" nomodify="1" ctrldbname="tms." ctrlhide="1" name="carrierid" ctrldbwhere="CarrierID='%{VehicleRealTimeID[CarrierID]}'" insertparam="'%{orgguid}'" ctrldbtable="xtmsm_carrier" noUpdate="1" ctrldbdata="CarrierName,CarrierID" ctrldbdatarel="carrierid"/></Ctrls></biztoolcfg>