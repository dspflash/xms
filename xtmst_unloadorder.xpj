<?xml version="1.0" encoding="UTF-8"?><biztoolcfg qryfmtOpCreate="SET @seq=0;SELECT SUBSTR(UnLoadCode,-5)+0 INTO @seq FROM tms.xtmst_unloadorder WHERE DATE(CreateDate)=CURDATE() ORDER BY UnLoadCode DESC LIMIT 0,1;SELECT generate_orderNo(Code_Prefix, DT_MODE, @seq,'','') INTO @odn FROM tms.xms_doc_code WHERE docType='unloadorder';insert into %{table} %{data};" qryfmtOpUpdate="" loadedClick="0" tableNm="xtmst_unloadorder" referLst="0" onLoadInit="0" tableTxt="xtmst_unloadorder" LstTP="Lst" lines2Link="xtmst_unloadorderdetail" jointbls="1" header2Link="" exdata4select=""><DataLstExtElmt><![CDATA[<DbDetails><queryFormat>select %{data} from %{dbtable} where x.carrierid='%{orgguid}' %{WHERE} limit %{StartRow},%{PgSize}</queryFormat></DbDetails>]]></DataLstExtElmt><operators4v><![CDATA[<xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="xtmst_unloadorder_ops.xml"/>]]></operators4v><Ctrls><Ctrl nomodify="1" name="unloadcode" insertparam="@odn" noUpdate="1"/><Ctrl Required="1" nomodify="1" ctrldbname="tms." name="vehiclerealtimeid" queryformat="SELECT Platenumber,dp.ToCityID,dp.ToAddress,dp.ToXSiteID,VehicleRealTimeCode,v.CarrierID,dp.VehicleRealTimeID FROM tms.xtmst_dispatchplan dp  JOIN  tms.xtmst_vehiclerealtime vrt ON dp.VehicleRealTimeID=vrt.VehicleRealTimeID JOIN tms.xtmsm_vehicle v ON v.VehicleID=vrt.VehicleID WHERE %{where}" ctrldbtable="xtmst_vehiclerealtime" ctrldbdata="VehicleRealTimeCode,VehicleRealTimeID" ctrldbdatarel="vehiclerealtimeid"><extelmt><![CDATA[<OnEnChange><submit next="CarrierID"/><submit next="XSiteID"/><submit next="UnLoadCityID"/><assign name="UnLoadAddress" expr="%{VehicleRealTimeID[ToAddress]}"/></OnEnChange>]]></extelmt></Ctrl><Ctrl noquery="1" nomodify="1" ctrldbname="tms." ctrlhide="1" name="status" ctrldbwhere="StatusType=6" insertparam="601" ctrldbtable="xtmsc_status_option" noUpdate="1" ctrldbdata="StatusName,StatusCode" ctrldbdatarel="statuscode"/><Ctrl nomodify="1" ctrldbname="tms." name="xsiteid" ctrldbwhere="XSiteID='%{VehicleRealTimeID[ToXSiteID]}'" ctrldbtable="xtmsm_xsite" ctrldbdata="XSiteName,Address,XSiteID" ctrldbdatarel="xsiteid"/><Ctrl ctrldbname="tms." name="unloadcityid" ctrldbwhere="CityID='%{VehicleRealTimeID[ToCityID]}'" ctrldbtable="xtmsm_master_city" ctrldbdata="CityAllName,CityID" ctrldbdatarel="cityid"/><Ctrl name="unloadaddress"/><Ctrl name="memo"/><Ctrl noquery="1" nomodify="1" ctrlhide="1" name="checkby" noInsert="1" noUpdate="1"/><Ctrl noquery="1" nomodify="1" ctrlhide="1" name="checkdate" noInsert="1" noUpdate="1"/><Ctrl noquery="1" nomodify="1" ctrlhide="1" name="createby" insertparam="'%{user_id}'" updateparam="'%{user_id}'" noUpdate="1"/><Ctrl noquery="1" nomodify="1" ctrlhide="1" name="createdate" insertparam="now()" noUpdate="1"/><Ctrl noquery="1" nomodify="1" ctrlhide="1" name="updateby" insertparam="'%{user_id}'" updateparam="'%{user_id}'"/><Ctrl noquery="1" nomodify="1" ctrlhide="1" name="updatedate" insertparam="now()" updateparam="now()"/><Ctrl noquery="1" nomodify="1" ctrlhide="1" name="unloadorderid" insertparam="uuid()" noUpdate="1"/><Ctrl noquery="1" nomodify="1" ctrlhide="1" name="xtmst_unloadorder_id" noInsert="1" noInAndUp="1" noUpdate="1"/><Ctrl Required="1" noquery="1" nomodify="1" ctrldbname="tms." ctrlhide="1" name="carrierid" ctrldbwhere="CarrierID='%{VehicleRealTimeID[CarrierID]}'" insertparam="'%{orgguid}'" ctrldbtable="xtmsm_carrier" noUpdate="1" ctrldbdata="CarrierName,CarrierID" ctrldbdatarel="carrierid"/></Ctrls></biztoolcfg>