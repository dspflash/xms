<?xml version="1.0" encoding="UTF-8"?><biztoolcfg qryfmtOpCreate="SET @seq=0;SELECT SUBSTR(FreightCode,-5)+0 INTO @seq FROM tms.xtmst_freight WHERE DATE(CreateDate)=CURDATE() ORDER BY FreightCode DESC LIMIT 0,1;SELECT generate_orderNo(Code_Prefix, DT_MODE, @seq,'','') INTO @odn FROM tms.xms_doc_code WHERE docType='freight';insert into %{table} %{data};" qryfmtOpUpdate="" loadedClick="0" tableNm="xtmst_freight" referLst="0" onLoadInit="0" tableTxt="xtmst_freight" LstTP="Lst" lines2Link="xtmst_freight_detail" jointbls="1" header2Link="" exdata4select=""><DataLstExtElmt><![CDATA[<DbDetails><queryFormat>select %{data} from %{dbtable} where x.carrierid='%{orgguid}' %{WHERE} limit %{StartRow},%{PgSize}</queryFormat></DbDetails>]]></DataLstExtElmt><operators4v><![CDATA[<xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="xtmst_freight_ops.xml"/>]]></operators4v><Ctrls><Ctrl name="freightcode" tabName="BasicInfo" insertparam="if('%{FreightCode}'='',@odn,'%{FreightCode}')" noUpdate="1"/><Ctrl dbfcsm="1" Required="1" nomodify="1" ctrldbname="tms." name="pickuporderid" ctrldbtable="xtmst_pickuporder" noUpdate="1" ctrldbdata="PickupOrderCode,shipper,shipperphone,shippermobilephone,fromcityid,shipperaddress,consignee,consigneephone,consigneemobilephone,tocityid,consigneeaddress,CarrierID,DeliveryMode,DeliveryMethod,PickupOrderID" ctrldbdatarel="pickuporderid"><extelmt><![CDATA[<OnEnChange><assign name="DeliveryMode[TypeCode]" expr="%{PickupOrderID[DeliveryMode]}" function="SetSel"/><assign name="DeliveryMethod[TypeCode]" expr="%{PickupOrderID[DeliveryMethod]}" function="SetSel"/><submit next="fromcityid"/><submit next="tocityid"/><submit next="carrierid"/></OnEnChange>]]></extelmt></Ctrl><Ctrl name="expectbegindatetime"/><Ctrl name="expectenddatetime"/><Ctrl noquery="1" nomodify="1" ctrldbname="tms." ctrlhide="1" name="status" ctrldbwhere="StatusType=2" insertparam="200" ctrldbtable="xtmsc_status_option" noUpdate="1" ctrldbdata="StatusName,StatusCode" ctrldbdatarel="statuscode"/><Ctrl noused="1" ctrldbname="tms." name="freighttype" ctrldbwhere="TypeClass=120" ctrldbtable="xtmsc_type_option" xTp="ComboBox" ctrldbdata="TypeName,TypeCode" ctrldbdatarel="typecode" ctrltype="ComboBox"><extattr><![CDATA[ onload="init"]]></extattr></Ctrl><Ctrl Required="1" ctrldbname="tms." name="deliverymode" ctrldbwhere="TableName='DispatchPlan' and ColumnName='DeliveryMode'" ctrldbtable="xtmsc_type_option" xTp="ComboBox" ctrldbdata="TypeName,TypeCode" ctrldbdatarel="typecode" ctrltype="ComboBox"><extattr><![CDATA[ onload="init"]]></extattr></Ctrl><Ctrl Required="1" ctrldbname="tms." name="consignmentmode" ctrldbwhere="TableName='DispatchPlan' and ColumnName='ConsignmentMode'" ctrldbtable="xtmsc_type_option" xTp="ComboBox" ctrldbdata="TypeName,TypeCode" ctrldbdatarel="typecode" ctrltype="ComboBox"><extattr><![CDATA[ onload="init"]]></extattr></Ctrl><Ctrl Required="1" ctrldbname="tms." name="deliverymethod" ctrldbwhere="typeclass=121" ctrldbtable="xtmsc_type_option" xTp="ComboBox" ctrldbdata="TypeName,TypeCode" ctrldbdatarel="typecode" ctrltype="ComboBox"><extattr><![CDATA[ onload="init"]]></extattr></Ctrl><Ctrl Required="1" name="shipper" tabName="ShipperInfo"/><Ctrl Required="1" nomodify="1" ctrldbname="tms." name="fromcityid" ctrldbwhere="CityID='%{PickupOrderID[FromCityID]}'" ctrldbtable="xtmsm_master_city" noUpdate="1" ctrldbdata="CityAllName,CityID" ctrldbdatarel="cityid"><addon><![CDATA[<MagicCtrl Name="pick%{colNm}" Link="tip:Pick" images=",data/search.png" button="type:0" Size="20,20"><OnClick><assign name="$parent.citypick.frmwndctrl" expr="xtmst_freight.FromCityID"/></OnClick></MagicCtrl>\r\n]]></addon></Ctrl><Ctrl Required="1" nomodify="1" ctrldbname="tms." name="fromxsiteid" ctrldbwhere="CityID='%{FromCityID[CityID]}'" ctrldbtable="xtmsm_xsite" ctrldbdata="XSiteName,XSiteID" ctrldbdatarel="xsiteid"><addon><![CDATA[<MagicCtrl Name="pick%{colNm}" Link="tip:Pick" images=",data/search.png" button="type:0" Size="20,20"><OnClick><assign name="$parent.XSitePick.frmwndctrl" expr="xtmst_freight.FromXSiteID"/><DbDetails><Where>CityID='%{FromCityID[CityID]}'</Where></DbDetails><submit namelist="DbDetails" next="$parent.XSitePick.CityID"/><submit next="$parent.XSitePick.xtmsm_xsite_vLst"/></OnClick></MagicCtrl>\r\n]]></addon></Ctrl><Ctrl Required="1" name="shipperphone"/><Ctrl Required="1" name="shipperaddress"/><Ctrl Required="1" name="consignee" tabName="ConsigneeInfo"/><Ctrl Required="1" nomodify="1" ctrldbname="tms." name="tocityid" ctrldbwhere="CityID='%{PickupOrderID[ToCityID]}' " ctrldbtable="xtmsm_master_city" noUpdate="1" ctrldbdata="CityAllName,CityID" ctrldbdatarel="cityid"><addon><![CDATA[<MagicCtrl Name="pick%{colNm}" Link="tip:Pick" images=",data/search.png" button="type:0" Size="20,20"><OnClick><assign name="$parent.citypick.frmwndctrl" expr="xtmst_freight.ToCityId"/></OnClick></MagicCtrl>\r\n]]></addon></Ctrl><Ctrl nomodify="1" ctrldbname="tms." name="toxsiteid" ctrldbwhere="CityID='%{ToCityID[CityID]}'" ctrldbtable="xtmsm_xsite" ctrldbdata="XSiteName,XSiteID" ctrldbdatarel="xsiteid"><addon><![CDATA[<MagicCtrl Name="pick%{colNm}" Link="tip:Pick" images=",data/search.png" button="type:0" Size="20,20"><OnClick><assign name="$parent.XSitePick.frmwndctrl" expr="xtmst_freight.ToXSiteID"/><DbDetails><Where>CityID='%{ToCityID[CityID]}'</Where></DbDetails><submit namelist="DbDetails" next="$parent.XSitePick.CityID"/><submit next="$parent.XSitePick.xtmsm_xsite_vLst"/></OnClick></MagicCtrl>\r\n]]></addon></Ctrl><Ctrl Required="1" name="consigneephone"/><Ctrl Required="1" name="consigneeaddress"/><Ctrl name="volumn" tabName="SizeInfo"/><Ctrl name="weight"/><Ctrl name="amount"/><Ctrl name="datelimite"/><Ctrl name="isbackorder"/><Ctrl name="issealbox"/><Ctrl name="actualvolumn" tabName="CheckInfo"/><Ctrl name="actualweight"/><Ctrl name="actualamount"/><Ctrl noquery="1" nomodify="1" ctrlhide="1" name="checkdate" noInsert="1" noUpdate="1"/><Ctrl noquery="1" nomodify="1" ctrlhide="1" name="checkby" noInsert="1" noUpdate="1"/><Ctrl noquery="1" nomodify="1" ctrlhide="1" name="ischeck" noInsert="1" noUpdate="1"/><Ctrl noused="1" name="isdispatchcarrier"/><Ctrl name="customordersource"/><Ctrl noquery="1" nomodify="1" ctrlhide="1" name="actualbegindatetime" noInsert="1" noUpdate="1"/><Ctrl noquery="1" nomodify="1" ctrlhide="1" name="actualenddatetime" noInsert="1" noUpdate="1"/><Ctrl name="appointcode"/><Ctrl ctrldbname="tms." name="settlementmethod" ctrldbwhere="typeclass=122" tabName="Settlement" ctrldbtable="xtmsc_type_option" xTp="ComboBox" ctrldbdata="TypeName,TypeCode" ctrldbdatarel="typecode" ctrltype="ComboBox"><extattr><![CDATA[ onload="init"]]></extattr></Ctrl><Ctrl name="totalfreightfee"/><Ctrl name="insurancefee"/><Ctrl name="pickupfee"/><Ctrl name="deliveryfee"/><Ctrl name="otherfee"/><Ctrl noquery="1" nomodify="1" ctrlhide="1" name="freightid" insertparam="uuid()" noUpdate="1"/><Ctrl noquery="1" nomodify="1" ctrlhide="1" name="createby" insertparam="'%{user_id}'" updateparam="'%{user_id}'" noUpdate="1"/><Ctrl noquery="1" nomodify="1" ctrlhide="1" name="createdate" insertparam="now()" noUpdate="1"/><Ctrl noquery="1" nomodify="1" ctrlhide="1" name="updateby" insertparam="'%{user_id}'" updateparam="'%{user_id}'"/><Ctrl noquery="1" nomodify="1" ctrlhide="1" name="updatedate" insertparam="now()" updateparam="now()"/><Ctrl Required="1" noquery="1" nomodify="1" ctrldbname="tms." ctrlhide="1" name="carrierid" insertparam="'%{orgguid}'" noUpdate="1"/><Ctrl noquery="1" nomodify="1" ctrlhide="1" name="xtmst_freight_id" noInsert="1" noInAndUp="1" noUpdate="1"/></Ctrls></biztoolcfg>